---
# meta file for roles/backup

dependencies:

- name: Generate logrotate files
  tags: [ 'backup', 'logrotate', 'configuration' ]
  when: backup__enable
  role: arillso.logrotate
  logrotate_global_config: false
  logrotate_applications: "{{ backup__logrotate_files }}"

- name: Setup NFS client
  tags: [ 'backup', 'nfs' ]
  when: backup__enable and backup__nfs_enable
  role: nfs
  vars:
    nfs_client_enable: true
    nfs_client_volumes:
    - src: "{{ backup__nfs_src }}"
      path: "{{ backup__nfs_target }}"
      options: "{{ backup__nfs_options }}"

- name: Setup MySQL client
  tags: [ 'backup', 'mysql' ]
  when: backup__enable and backup__mysql_enable
  role: mysql
  vars:
    mysql_client_enable: true
