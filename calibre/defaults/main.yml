---

calibre__enable: "{{ calibre_enable | default(false) }}"
calibre__server_enable: "{{ calibre_server_enable | default(false) }}"
calibre__nginx_enable: "{{ calibre_nginx_enable | default(false) }}"
calibre__server_write: "{{ calibre_server_write | default(false) }}"
calibre__server_auth: "{{ calibre_server_auth | default(false) }}"

calibre__log_dir: "{{ calibre_log_dir | default('/var/log/calibre') }}"
calibre__data_dir: "{{ calibre_data_dir | default('/var/lib/calibre') }}"

calibre__server_listen: "{{ calibre_server_listen | default('127.0.0.1') }}"
calibre__server_port: "{{ calibre_server_port | default('8080') }}"

calibre__packages:
- calibre

calibre__libraries: "{{ calibre_libraries | default([]) }}"

calibre__server_nginx_site: "{{ calibre_server_nginx_site | default({}) }}"

calibre__user: "{{ calibre_user | default('calibre') }}"
calibre__group: "{{ calibre_group | default('calibre') }}"

calibre__server_options: "{{ '--disable-local-write' if "

calibre__server_services:
- name: calibre-server
  description: Calibre content server
  type: simple
  user: "{{ calibre__user }}"
  working_directory: "{{ calibre__data_dir }}"
  standard_output: "file:{{ calibre__log_dir }}/server.log"
  standard_error: "file:{{ calibre__log_dir }}/error.log"
  exec_start: "/usr/bin/calibre-server --listen-on={{ calibre__server_listen }} --port={{ calibre__server_port }} {{ calibre__libraries | join(' ') }}"
  environment:
    PATH: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
