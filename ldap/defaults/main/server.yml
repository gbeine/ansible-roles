---

ldap__server_enable: "{{ ldap_server_enable | default(false) }}"
ldap__server_tls_enable: "{{ ldap_server_tls_enable | default(false) }}"
ldap__server_tls_realm: "{{ ldap_server_tls_realm | default('localhost') }}"

ldap__server_config_root_dn: "{{ ldap_server_config_root_dn | default('cn=config') }}"
ldap__server_config_root_password: "{{ vault__ldap_server_config_root_password }}"

ldap__server_organization: "{{ ldap_server_organization | default('Default Corp.') }}"
ldap__server_base_dn: "{{ ldap_server_base_dn | default('dc=nodomain') }}"
ldap__server_root_dn: "{{ ldap_server_root_dn | default('cn=admin,' + ldap__server_base_dn) }}"
ldap__server_root_password: "{{ vault__ldap_server_root_password }}"

ldap__server_services: "{{ ldap_server_services | default(ldap__server_services_default) }}"

ldap__server_database: "{{ ldap_server_database | default({}) }}"
ldap__server_modules: "{{ ldap_server_modules | default([]) }}"
ldap__server_schema: "{{ ldap_server_schema | default([]) }}"

#
# Do not change from here
#

ldap__shelldap_ldap_uri: ldap://127.0.0.1:389

ldap__schema_dir: "{{ ldap__etc_dir }}/schema"
ldap__server_config_dir: "{{ ldap__etc_dir }}/slapd.d"
ldap__server_config_database_dir: "{{ ldap__server_config_dir }}/cn=config"
ldap__server_config_schema_dir: "{{ ldap__server_config_database_dir }}/cn=schema"
ldap__server_config_database_config_file: "{{ ldap__server_config_database_dir }}/olcDatabase={0}config.ldif"

ldap__server_tls_ca: "{{ pki__realms_dir }}/{{ ldap__server_tls_realm }}/public/ca.crt"
ldap__server_tls_cert: "{{ pki__realms_dir }}/{{ ldap__server_tls_realm }}/public/{{ ldap__server_tls_realm }}.crt"
ldap__server_tls_key: "{{ pki__realms_dir }}/{{ ldap__server_tls_realm }}/private/{{ ldap__server_tls_realm }}.key"

ldap__server_packages:
- shelldap
- slapd
- schema2ldif
- ldap-utils

ldap__server_services_default:
- ldap:///
- ldapi:///

ldap__server_modules_default:
- back_mdb

ldap__server_schema_default:
- core
- cosine
- nis
- inetorgperson

ldap__server_packages_combined: "{{ ldap__server_packages }}"
ldap__server_modules_combined: "{{ ldap__server_modules_default + ldap__server_modules }}"
ldap__server_schema_combined: "{{ ldap__server_schema_default + ldap__server_schema }}"
