---

ldap__client_enable: "{{ ldap_client_enable | default(ldap__server_enable) }}"
ldap__client_tls_enable: "{{ ldap_client_tls_enable | default(false) }}"

ldap__client_config_base: "{{ ldap_client_config_base | default(ldap__server_base_dn) }}"
ldap__client_config_uris: "{{ ldap_client_config_uris | default(ldap__client_config_uris_default) }}"
ldap__client_config_tls_ca: "{{ ldap_client_config_tls_ca  | default('/etc/ssl/certs/ca-certificates.crt') }}"
ldap__client_config_deref: "{{ ldap_client_config_deref | default('never') }}"

ldap__nslcd_enable: "{{ ldap_nslcd_enable | default(false) }}"
ldap__nslcd_uid: "{{ ldap_nslcd_uid | default('nslcd') }}"
ldap__nslcd_gid: "{{ ldap_nslcd_gid | default('nslcd') }}"
ldap__nslcd_uri: "{{ ldap__client_config_uris }}"
ldap__nslcd_idle_timelimit: "{{ ldap_nslcd_idle_timelimit | default(600) }}"
ldap__nslcd_base: "{{ ldap_nslcd_base | default(ldap__client_config_base) }}"
ldap__nslcd_ldap_version: "{{ ldap_nslcd_ldap_version | default(3) }}"
ldap__nslcd_binddn: "{{ ldap_nslcd_binddn | default('none') }}"
ldap__nslcd_bindpw: "{{ ldap_nslcd_bindpw | default('none') }}"
ldap__nslcd_rootpwmoddn: "{{ ldap_nslcd_rootpwmoddn | default('none') }}"
ldap__nslcd_ssl: "{{ ldap_nslcd_ssl | default(ldap__client_tls_enable) }}"
ldap__nslcd_tls_reqcert: "{{ ldap_nslcd_tls_reqcert | default('allow') }}"
ldap__nslcd_tls_cacertfile: "{{ ldap__client_config_tls_ca }}"
ldap__nslcd_scope: "{{ ldap_nslcd_scope | default('subtree') }}"
ldap__nslcd_nss_min_uid: "{{ ldap_nslcd_nss_min_uid | default(1000) }}"
ldap__nslcd_filter: "{{ ldap_nslcd_filter | default('passwd (objectClass=posixAccount)') }}"
ldap__nslcd_deref: "{{ ldap__client_config_deref }}"
ldap__nslcd_referrals: "{{ ldap_nslcd_referrals | default(false) }}"

#
# Do not change from here
#

ldap__client_packages:
- libnss-ldapd
- libpam-ldapd
- nscd
- nslcd
- nslcd-utils
- ldap-utils

ldap__client_config_uris_default:
- ldap://localhost/

ldap__client_packages_combined: "{{ ldap__client_packages }}"
