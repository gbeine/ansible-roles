---
# defaults file for roles/powerdns

powerdns_server_packages: []
powerdns_recursor_packages: []

#
# Substitutions
#

powerdns__enable: "{{ powerdns_enable | default (false) }}"
powerdns__server_enable: "{{ powerdns_server_enable | default (false) }}"
powerdns__server_backend: "{{ powerdns_server_backend | default ('default') }}"

powerdns__recursor_enable: "{{ powerdns_recursor_enable | default (false) }}"
powerdns__recursor_hosts: "{{ powerdns_recursor_hosts | default ([]) }}"

powerdns__config_allow_from: "{{ powerdns_config_allow_from | default(powerdns__config_allow_from_default) }}"
powerdns__config_config_dir: "{{ powerdns_config_config_dir | default('/etc/powerdns') }}"
powerdns__config_etc_hosts_file: "{{ powerdns_config_etc_hosts_file | default('/etc/hosts') }}"
powerdns__config_exports_etc_hosts: "{{ powerdns_config_exports_etc_hosts | default(false) }}"
powerdns__config_hint_file: "{{ powerdns_config_hint_file | default('/usr/share/dns/root.hints') }}"
powerdns__config_public_suffix_list_file: "{{ powerdns_config_public_suffix_list_file | default('/usr/share/publicsuffix/public_suffix_list.dat') }}"
powerdns__config_quiet: "{{ powerdns_config_quiet | default(true) }}"

powerdns__config_api: "{{ powerdns_config_api | default(false) }}"
powerdns__config_api_key: "{{ powerdns_config_api_key | default('') }}"
powerdns__config_default_soa_mail: "{{ powerdns_config_default_soa_mail | default('') }}"
powerdns__config_default_soa_name: "{{ powerdns_config_default_soa_name | default('') }}"
powerdns__config_launch: "{{ powerdns_config_launch | default([]) }}"

powerdns__config_local_address: "{{ powerdns_config_local_address | default(['0.0.0.0']) }}"
powerdns__config_local_ipv6: "{{ powerdns_config_local_ipv6 | default(['::']) }}"

powerdns__config_security_poll_suffix: "{{ powerdns_config_security_poll_suffix | default('') }}"
powerdns__config_setgid: "{{ powerdns_config_setgid | default('pdns') }}"
powerdns__config_setuid: "{{ powerdns_config_setuid | default('pdns') }}"

powerdns__config_webserver: "{{ powerdns_config_webserver | default(false) }}"
powerdns__config_webserver_address: "{{ powerdns_config_webserver_address | default('127.0.0.1') }}"
powerdns__config_webserver_allow_from: "{{ powerdns_config_webserver_allow_from | default(['127.0.0.1','::1']) }}"
powerdns__config_webserver_password: "{{ powerdns_config_webserver_password | default('') }}"
powerdns__config_webserver_port: "{{ powerdns_config_webserver_port | default('8081') }}"

powerdns__config_backend_host: "{{ powerdns_config_backend_host | default('') }}"
powerdns__config_backend_dbname: "{{ powerdns_config_backend_dbname | default('') }}"
powerdns__config_backend_user: "{{ powerdns_config_backend_user | default('') }}"
powerdns__config_backend_password: "{{ powerdns_config_backend_password | default('') }}"
powerdns__config_backend_dnssec: "{{ powerdns_config_backend_dnssec | default(false) }}"

#
# Do not change from here
#

powerdns__recursor_packages_default:
- pdns-recursor

powerdns__server_packages_default:
- pdns-server

powerdns__server_backend_packages:
  default: []
  gpgsql:
  - pdns-backend-pgsql
  bind:
  - pdns-backend-bind

powerdns__config_allow_from_default:
- 127.0.0.0/8
- 10.0.0.0/8
- 100.64.0.0/10
- 169.254.0.0/16
- 192.168.0.0/16
- 172.16.0.0/12
- ::1/128
- fc00::/7
- fe80::/10

powerdns__server_packages_combined: "{{ powerdns__server_packages_default + powerdns__server_backend_packages[powerdns__server_backend] + powerdns_server_packages }}"
powerdns__recursor_packages_combined: "{{ powerdns__recursor_packages_default + powerdns_recursor_packages }}"
