---
# defaults file for roles/pki

#
# Substitutions
#

pki__easyrsa_enable: "{{ pki_easyrsa_enable | default(false) }}"
pki__easyrsa_path: "{{ pki_easyrsa_path | default(pki__easyrsa_path_default) }}"

pki__easyrsa_dn: "{{ pki_easyrsa_dn | default('cn_only') }}"
pki__easyrsa_req_country: "{{ pki_easyrsa_req_country | default('US') }}"
pki__easyrsa_req_province: "{{ pki_easyrsa_req_province | default('California') }}"
pki__easyrsa_req_city: "{{ pki_easyrsa_req_city | default('San Francisco') }}"
pki__easyrsa_req_org: "{{ pki_easyrsa_req_org | default('Copyleft Certificate Co') }}"
pki__easyrsa_req_email: "{{ pki_easyrsa_req_email | default('me@example.net') }}"
pki__easyrsa_req_ou: "{{ pki_easyrsa_req_ou | default('My Organizational Unit') }}"
pki__easyrsa_key_size: "{{ pki_easyrsa_key_size | default(2048) }}"
pki__easyrsa_algo: "{{ pki_easyrsa_algo | default('rsa') }}"
pki__easyrsa_curve: "{{ pki_easyrsa_curve | default('secp384r1') }}"
pki__easyrsa_ca_exprire: "{{ pki_easyrsa_ca_expire | default(3650) }}"
pki__easyrsa_cert_expire: "{{ pki_easyrsa_cert_expire | default(825) }}"
pki__easyrsa_crl_days: "{{ pki_easyrsa_crl_days | default(180) }}"
pki__easyrsa_cert_renew: "{{ pki_easyrsa_cert_renew | default(30) }}"
pki__easyrsa_rand_sn: "{{ pki_easyrsa_rand_sn | default('yes') }}"
pki__easyrsa_ns_support: "{{ pki_easyrsa_ns_support | default('no') }}"
pki__easyrsa_ns_comment: "{{ pki_easyrsa_ns_comment | default('Easy-RSA Generated Certificate') }}"
pki__easyrsa_digest: "{{ pki_easyrsa_digest | default('sha256') }}"
pki__easyrsa_password: "{{ vault__pki_easyrsa_password }}"

#
# Do not change from here
#

pki__easyrsa_environment:
  EASYRSA_PKI: "{{ pki__secrets_dir }}"
  EASYRSA_DN: "{{ pki__easyrsa_dn }}"
  EASYRSA_REQ_COUNTRY: "{{ pki__easyrsa_req_country }}"
  EASYRSA_REQ_PROVINCE: "{{ pki__easyrsa_req_province }}"
  EASYRSA_REQ_CITY: "{{ pki__easyrsa_req_city }}"
  EASYRSA_REQ_ORG: "{{ pki__easyrsa_req_org }}"
  EASYRSA_REQ_EMAIL: "{{ pki__easyrsa_req_email }}"
  EASYRSA_REQ_OU: "{{ pki__easyrsa_req_ou }}"
  EASYRSA_KEY_SIZE: "{{ pki__easyrsa_key_size }}"
  EASYRSA_ALGO: "{{ pki__easyrsa_algo }}"
  EASYRSA_CURVE: "{{ pki__easyrsa_curve }}"
  EASYRSA_CA_EXPIRE: "{{ pki__easyrsa_ca_exprire }}"
  EASYRSA_CERT_EXPIRE: "{{ pki__easyrsa_cert_expire }}"
  EASYRSA_CRL_DAYS: "{{ pki__easyrsa_crl_days }}"
  EASYRSA_CERT_RENEW: "{{ pki__easyrsa_cert_renew }}"
  EASYRSA_RAND_SN: "{{ pki__easyrsa_rand_sn }}"
  EASYRSA_NS_SUPPORT: "{{ pki__easyrsa_ns_support }}"
  EASYRSA_NS_COMMENT: "{{ pki__easyrsa_ns_comment }}"
  EASYRSA_DIGEST: "{{ pki__easyrsa_digest }}"
  EASYRSA_BATCH: yes
  EASYRSA_PASSIN: "pass:{{ pki__easyrsa_password }}"

pki__easyrsa_path_default: /usr/bin/easyrsa

pki__easyrsa_directories_gitkeep:
- certs_by_serial
- issued
- renewed/certs_by_serial
- renewed/private_by_serial
- renewed/reqs_by_serial
- reqs
- revoked/certs_by_serial
- revoked/private_by_serial
- revoked/reqs_by_serial
