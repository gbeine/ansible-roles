---

dependencies:

- name: Setup nginx
  tags: [ 'nextcloud', 'nginx' ]
  when: nextcloud__enable and nextcloud__nginx_enable
  role: nginx
  vars:
    nginx_sites: "{{ nextcloud__nginx_site }}"

- name: Setup PostgreSQL
  tags: [ 'nextcloud', 'postgresql' ]
  when: nextcloud__enable and nextcloud__postgresql_enable
  role: postgresql

- name: Setup MySQL
  tags: [ 'nextcloud', 'mysql' ]
  when: nextcloud__enable and nextcloud__mysql_enable
  role: mysql

- name: Setup Redis
  tags: [ 'nextcloud', 'redis' ]
  when: nextcloud__enable and nextcloud__redis_enable
  role: redis
