---
# defaults file for roles/icinga

icinga_packages: []
icinga_web_packages: []
icinga_features: []

#
# Substitutions
#

icinga__enable: "{{ icinga_enable | default (false) }}"
icinga__pki_enable: "{{ icinga_pki_enable | default (false) }}"
icinga__web_enable: "{{ icinga_web_enable | default (false) }}"
icinga__mysql_enable: "{{ icinga_mysql_enable | default (false) }}"
icinga__pgsql_enable: "{{ icinga_pgsql_enable | default (false) }}"

icinga__role_master:  "{{ icinga_role_master | default (false) }}"
icinga__role_agent:  "{{ icinga_role_agent | default (false) }}"

icinga__constant_plugin_dir: "{{ icinga_constant_plugin_dir | default ('/usr/lib/nagios/plugins') }}"
icinga__constant_manubulon_plugin_dir: "{{ icinga_constant_manubulon_plugin_dir | default ('/usr/lib/nagios/plugins') }}"
icinga__constant_plugin_contrib_dir: "{{ icinga_constant_plugin_contrib_dir | default ('/usr/lib/nagios/plugins') }}"
icinga__constant_plugin_local_dir: "{{ icinga_constant_plugin_local_dir | default ('/usr/local/lib/nagios/plugins') }}"
icinga__constant_node_name: "{{ icinga_constant_node_name | default ('localhost') }}"
icinga__constant_zone_name: "{{ icinga_constant_zone_name | default (icinga__constant_node_name) }}"
icinga__constant_ticket_salt: "{{ icinga_constant_ticket_salt | default ('') }}"

icinga__pki_realm: "{{ icinga_pki_realm | default (icinga__constant_node_name) }}"

icinga__mysql_host: "{{ icinga_mysql_host | default ('localhost') }}"
icinga__mysql_user: "{{ icinga_mysql_user | default ('icinga') }}"
icinga__mysql_database:  "{{ icinga_mysql_database | default ('icinga') }}"
icinga__mysql_password: "{{ vault__icinga_mysql_password | default ('') }}"

icinga__conf_api_users: "{{ icinga_conf_api_users | default({}) }}"
icinga__conf_commands: "{{ icinga__conf_commands_default }}"
icinga__conf_downtimes: "{{ icinga__conf_downtimes_default }}"
icinga__conf_groups: "{{ icinga__conf_groups_default }}"
icinga__conf_hosts: "{{ icinga__conf_hosts_default }}"
icinga__conf_notifications: "{{ icinga__conf_notifications_default }}"
icinga__conf_services: "{{ icinga__conf_services_default }}"
icinga__conf_templates: "{{ icinga__conf_templates_default }}"
icinga__conf_timeperiods: "{{ icinga__conf_timeperiods_default }}"
icinga__conf_users: "{{ icinga__conf_users_default }}"
icinga__zones: "{{ icinga_zones | default(icinga__zones_default) }}"

#
# Do not change from here
#

icinga__packages_default:
- dnsutils
- snmp
- monitoring-plugins
- icinga2

icinga__web_packages_default:
- icingacli
- icingaweb2
- icingaweb2-module-monitoring
- nagios-images

icinga__features_default:
- checker
- mainlog
- notification

icinga__api_features: "{{ [ 'api'] if icinga__role_master or icinga__role_agent else [] }}"

icinga__mysql_packages: "{{ [ 'icinga2-ido-mysql' ] if icinga__mysql_enable else [] }}"
icinga__mysql_features: "{{ [ 'ido-mysql'] if icinga__mysql_enable else [] }}"

icinga__pgsql_packages: "{{ [ 'icinga2-ido-pgsql' ] if icinga__pgsql_enable else [] }}"
icinga__pgsql_features: "{{ [ 'ido-pgsql'] if icinga__pgsql_enable else [] }}"

icinga__packages_combined: "{{ icinga__packages_default + icinga_packages + icinga__mysql_packages + icinga__pgsql_packages }}"
icinga__web_packages_combined: "{{ icinga__web_packages_default + icinga_web_packages}}"
icinga__features_combined: "{{ icinga__features_default + icinga_features + icinga__api_features + icinga__mysql_features + icinga__pgsql_features }}"
