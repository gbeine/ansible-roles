---
# defaults file for postfix

postfix_packages: []
postfix_postgrey_opts: {}

#
# Substitutions
#

postfix__enable: "{{ postfix_enable | default(false) }}"
postfix__etc_path: "{{ postfix_etc_path | default('/etc/postfix') }}"

postfix__postgrey_enable: "{{ postfix_postgrey_enable | default(false) }}"
postfix__postsrsd_enable: "{{ postfix_postsrsd_enable | default(false) }}"
postfix__policyd_spf_enable: "{{ postfix_policyd_spf_enable | default(false) }}"
postfix__spamassassin_enable: "{{ postfix_spamassassin_enable | default(false) }}"

postfix__postsrsd_domain: "{{ postfix_postsrsd_domain | default('') }}"
postfix__postsrsd_exclude_domains: "{{ postfix_postsrsd_exclude_domains | default([]) }}"
postfix__postsrsd_separator: "{{ postfix_postsrsd_separator | default('=') }}"
postfix__postsrsd_secret_file: "{{ postfix_postsrsd_secret | default('/etc/postsrsd.secret') }}"
postfix__postsrsd_hashlength: "{{ postfix_postsrsd_hashlength | default(4) }}"
postfix__postsrsd_hashmin: "{{ postfix_postsrsd_hashmin | default(4) }}"
postfix__postsrsd_forward_port: "{{ postfix_postsrsd_forward_port | default(10001) }}"
postfix__postsrsd_reverse_port: "{{ postfix_postsrsd_reverse_port | default(10002) }}"
postfix__postsrsd_run_as: "{{ postfix_postsrsd_run_as | default('postsrsd') }}"
postfix__postsrsd_listen_addr: "{{ postfix_postsrsd_listen_addr | default('127.0.0.1') }}"
postfix__postsrsd_chroot: "{{ postfix_postsrsd_chroot | default('/var/lib/postsrsd') }}"
postfix__postsrsd_secret: "{{ vault__postsrsd_secret | default('') }}"

postfix__spampd_startspamd: "{{ postfix_spampd_startspamd | default(false) }}"
postfix__spampd_pidfile: "{{ postfix_spampd_pidfile | default('/var/run/spampd.pid') }}"
postfix__spampd_listenhost: "{{ postfix_spampd_listenhost | default('127.0.0.1') }}"
postfix__spampd_listenport: "{{ postfix_spampd_listenport | default(10025) }}"
postfix__spampd_desthost: "{{ postfix_spampd_desthost | default('127.0.0.1') }}"
postfix__spampd_destport: "{{ postfix_spampd_destport | default(10026) }}"
postfix__spampd_children: "{{ postfix_spampd_children | default(3) }}"
postfix__spampd_userid: "{{ postfix_spampd_userid | default('spampd') }}"
postfix__spampd_grpid: "{{ postfix_spampd_grpid | default('spampd') }}"
postfix__spampd_tagall: "{{ postfix_spampd_tagall | default(true) }}"
postfix__spampd_autowhitelist: "{{ postfix_spampd_autowhitelist | default(false) }}"
postfix__spampd_localonly: "{{ postfix_spampd_localonly | default(true) }}"
postfix__spampd_loginet: "{{ postfix_spampd_loginet | default(false) }}"
postfix__spampd_addopts: "{{ postfix_spampd_addopts | default('') }}"

postfix__spampd_options: "{{ postfix_spampd_options | default([]) }}"
postfix__virtual_tables_ldap: "{{ postfix_virtual_tables_ldap | default({}) }}"

#
# Do not change from here
#

postfix__packages_default:
- postfix

postfix__postgrey_packages:
- postgrey

postfix__postgrey_options_default:
  inet: 10023

postfix__postsrsd_packages:
- postsrsd

postfix__policyd_spf_packages:
- postfix-policyd-spf-perl

postfix__spamassassin_packages:
- spamassassin
- spamc
- spampd

postfix__main_combined: "{{ postfix__main_default | combine(postfix_main) }}"
postfix__master_combined: "{{ postfix__master_default | merge_by_splittedkey(postfix_master, 'service', 'type') }}"
postfix__packages_combined: "{{ postfix__packages_default + postfix_packages }}"

postfix__postgrey_options_combined: "{{ postfix__postgrey_options_default | combine(postfix_postgrey_options) | join_with_prefix('--') }}"
