---
# meta file for roles/auth

dependencies:

- name: Configure nslcd
  role: debops.debops.nslcd
  nslcd__ldap_base_dn: "{{ auth__ldap_base }}"
  nslcd__configuration: "{{ auth__nslcd_configuration }}"
  nslcd__ldap_host_filter: "{{ auth__nslcd_host_filter }}"
  when: auth__ldap_enable
  tags:
  - auth
  - configuration
  
- name: Configure nsswitch
  role: debops.debops.nsswitch
  nsswitch__enabled: "{{ auth__nsswitch_enable }}"
  nsswitch__database_map: "{{ auth__nsswitch_config }}"
  when: auth__nsswitch_enable
  tags:
  - auth
  - configuration

- name: Configure sudoers
  role: arillso.sudoers
  sudoers_sudoers: "{{ auth__sudoers }}"
  sudoers_sudoers_d_files: "{{ auth__sudoers_files }}"
  when: auth__sudoers_enable
  tags:
  - auth
  - configuration
