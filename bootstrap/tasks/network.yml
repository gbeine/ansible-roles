---

# tasks file for roles/bootstrap

- name: Generate interfaces configuration
  tags: [ 'configuration' ]
  ansible.builtin.template:
    src: etc/network/interfaces.j2
    dest: /etc/network/interfaces
    owner: root
    group: root
    mode: 0644

- name: Generate additional interfaces configuration
  tags: [ 'configuration' ]
  ansible.builtin.template:
    src: etc/network/interfaces.d/interface.j2
    dest: "/etc/network/interfaces.d/{{ item['priority'] }}-{{ item['name'] | default(item['interface']) }}"
    owner: root
    group: root
    mode: 0644
  with_items: "{{ bootstrap__network_interfaces }}"
