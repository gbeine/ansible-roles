---
# tasks file for roles/bootstrap

- name: Add groups
  tags: [ bootstrap, account, group ]
  ansible.builtin.group:
    name: "{{ item.name }}"
    state: present
    system: "{{ item.system | default('no') }}"
  with_items: "{{ bootstrap__group }}"

- name: Add users
  tags: [ bootstrap, account, user ]
  ansible.builtin.user:
    name: "{{ item.name }}"
    comment: "{{ item.description | default('') }}"
    group: "{{ item.group }}"
    create_home: "{{ item.create_home | default('yes') }}"
    home: "{{ item.home }}"
    shell: "{{ item.shell }}"
    state: present
    system: "{{ item.system | default('no') }}"
  with_items: "{{ bootstrap__user }}"
